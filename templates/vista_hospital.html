{% extends 'layout.html'%}

{% block body%}

{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<p>{{message}}</p>
{% endfor %}
{% endif %}
{% endwith %}

<p>
    {% for aux_nombre_hospital_vista in nombre_hospital_vista %}
        <p>
            <p style="text-align: center; color:red" >VISTA_HOPITAL {{aux_nombre_hospital_vista.1}}.html</p>
            <p style="text-align: center; color:red" >Bienvenido al hospital {{aux_nombre_hospital_vista.1}}</p>
        </p>
    {% endfor %}
</p>
<br>

<!-- AGREGAR agragar beneficiario -->
<table>
    <thead>
        <tr>
            <th style="text-align: center;">Apellido</th>
            <th style="text-align: center;">Nombre</th>
            <th style="text-align: center;">DNI</th>
        </tr>
    </thead>
    <tbody>
        <form action="/agregarBeneficiario" method="POST">
            <td>
                <input type="text" name="apellido" placeholder="Apellido">
            </td>
            <td>
                <input type="text" name="nombre" placeholder="Nombre">
            </td>
            <td>
                <input type="text" name="dni" placeholder="DNI">
            </td>
            <td>
                {% for aux_nombre_hospital_vista in nombre_hospital_vista %}
                    <input  name="aux_nombre_hospital_vista" value = "{{aux_nombre_hospital_vista.0}}">
                {% endfor %}
                <button type="submit">GUARDAR</button> 
            </td>
        </form>
    </tbody>
</table>


<!-- TABLA DE BNF -->
<div class="container mt-4">
    <div class="row">
      <div class="col-12 bg-secondary text-white p-2" >
        <table>
            <thead>
                <tr>
                    <th class="px-2 text-center">id_ben</th>
                    <th class="px-2 text-center">nombre</th>
                    <th class="px-2 text-center">apellido</th>
                    <!-- <th class="px-2 text-center">DNI</th>
                    <th class="px-2 text-center">diagnostico emisor</th>
                    <th class="px-2 text-center">diagnostico receptor</th>
                    <th class="px-2 text-center">fecha de ingreso</th>
                    <th class="px-2 text-center">fecha de egreso</th> -->

                    <th class="px-2 text-center">Id_cama</th>
                    <th class="px-2 text-center">id_hospital</th>
                    <th class="px-2 text-center">NÂº de Bnf</th>
                </tr>
            </thead>
            <tbody>               

                <!-- detalle de Beneficiario -->
                 {% for dato_beneficiario in data_beneficiario_vista %}
                        {% for dato in datos %}
                            {% if dato_beneficiario.0 == dato.2 %}
                                <tr>
                                    <td class="px-2 text-center">{{dato_beneficiario.0}}</td>
                                    <td class="px-2 text-center">{{dato_beneficiario.1}}</td>
                                    <td class="px-2 text-center">{{dato_beneficiario.2}}</td>
                                    <td class="px-2 text-center">{{dato.0}}</td>
                                    <td class="px-2 text-center">{{dato.1}}</td>
                                    <td class="px-2 text-center">{{dato.2}}</td>
                                    
                                    <td>
                                        <a class="btn btn-danger" href="/edit/{{dato_beneficiario.0}}">EDITAR</a>
                                        <a class="btn btn-danger" href="/delate/{{dato_beneficiario.0}},{{dato.1}}">BORRAR</a>
                                    
                                    <td>
                                </tr>
                            {% endif %}
                        {% endfor%}
                {% endfor%}
                
                <!-- En caso de que no tenga un beneficiario asociado a la cama, se muestre la cama vacia-->
                {% for dato in datos %} 
                    {%if dato.2 is none  %}
                        <tr>
                            <td class="px-2 text-center">...</td>
                            <td class="px-2 text-center">...</td>
                            <td class="px-2 text-center">...</td>
                            <td class="px-2 text-center">{{dato.0}}</td>
                            <td class="px-2 text-center">{{dato.1}}</td>
                            <td class="px-2 text-center">{{dato.2}}</td>
                            <td>
                                <a class="btn btn-danger">EDITAR</a>
                                <a class="btn btn-danger">BORRAR</a>
                            <td>
                        </tr>
                    {%endif%}
                {% endfor%}            
            </tbody>
        </table>
        
      </div>
    </div>
</div>
<!--  -->
    
{% endblock %}